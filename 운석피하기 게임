<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìš°ì£¼ì„  ìš´ì„ í”¼í•˜ê¸°</title>
    <style>
        body { margin: 0; background: black; display: flex; justify-content: center; align-items: center; height: 100vh; color: white; font-family: sans-serif; overflow: hidden; }
        canvas { border: 2px solid white; background: radial-gradient(circle, #1a1a2e, #000000); }
        #ui { position: absolute; top: 20px; text-align: center; pointer-events: none; }
    </style>
</head>
<body>

    <div id="ui">
        <h1 id="score">ì ìˆ˜: 0</h1>
        <p id="msg">í™”ì‚´í‘œ ì¢Œìš°í‚¤ë¡œ í”¼í•˜ì„¸ìš”!</p>
    </div>
    <canvas id="gameCanvas" width="400" height="600"></canvas>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // 1. ë³€ìˆ˜ ì„¤ì •
    let player = { x: 180, y: 550, width: 30, height: 30, speed: 5 };
    let meteors = []; // ë–¨ì–´ì§€ëŠ” ìš´ì„ë“¤
    let score = 0;
    let isGameOver = false;
    let frameCount = 0; // ê²Œì„ ì‹œê°„ íë¦„ ì²´í¬ìš©
    
    // í‚¤ë³´ë“œ ìƒíƒœ
    let keys = { right: false, left: false };

    // 2. í‚¤ë³´ë“œ ì…ë ¥ ê°ì§€
    document.addEventListener("keydown", e => {
        if (e.code === "ArrowLeft") keys.left = true;
        if (e.code === "ArrowRight") keys.right = true;
        if (isGameOver && e.code === "Enter") resetGame(); // ì—”í„°í‚¤ë¡œ ì¬ì‹œì‘
    });
    document.addEventListener("keyup", e => {
        if (e.code === "ArrowLeft") keys.left = false;
        if (e.code === "ArrowRight") keys.right = false;
    });

    // 3. ê²Œì„ ë¡œì§ ì—…ë°ì´íŠ¸
    function update() {
        if (isGameOver) return;

        frameCount++;

        // í”Œë ˆì´ì–´ ì´ë™
        if (keys.left && player.x > 0) player.x -= player.speed;
        if (keys.right && player.x < canvas.width - player.width) player.x += player.speed;

        // ìš´ì„ ìƒì„± (ë‚œì´ë„ ì¡°ì ˆ: ì ìˆ˜ê°€ ë†’ì„ìˆ˜ë¡ ë” ìì£¼ ë‚˜ì˜´)
        let spawnRate = 30; // ê¸°ë³¸ 30í”„ë ˆì„ë§ˆë‹¤ ìƒì„±
        if (score > 500) spawnRate = 20;
        if (score > 1000) spawnRate = 10;

        if (frameCount % spawnRate === 0) {
            let size = Math.random() * 30 + 10; // í¬ê¸° 10~40 ëœë¤
            meteors.push({
                x: Math.random() * (canvas.width - size),
                y: -50, // í™”ë©´ ìœ„ì—ì„œ ì‹œì‘
                size: size,
                speed: Math.random() * 3 + 2 + (score / 500) // ì ìˆ˜ ë†’ì„ìˆ˜ë¡ ë¹¨ë¼ì§
            });
        }

        // ìš´ì„ ì´ë™ ë° ì¶©ëŒ ì²´í¬
        for (let i = 0; i < meteors.length; i++) {
            let m = meteors[i];
            m.y += m.speed;

            // ì¶©ëŒ ì²´í¬ (í”Œë ˆì´ì–´ì™€ ìš´ì„ì´ ë‹¿ì•˜ëŠ”ì§€)
            if (
                player.x < m.x + m.size &&
                player.x + player.width > m.x &&
                player.y < m.y + m.size &&
                player.y + player.height > m.y
            ) {
                isGameOver = true;
                document.getElementById("msg").innerHTML = "ğŸ’¥ ì¶©ëŒ! ì—”í„°í‚¤(Enter)ë¥¼ ëˆŒëŸ¬ ì¬ì‹œì‘";
            }

            // í™”ë©´ ì•„ë˜ë¡œ ë‚˜ê°„ ìš´ì„ ì œê±° ë° ì ìˆ˜ ì¶”ê°€
            if (m.y > canvas.height) {
                meteors.splice(i, 1);
                score += 10;
                document.getElementById("score").innerText = "ì ìˆ˜: " + score;
                i--;
            }
        }
    }

    // 4. í™”ë©´ ê·¸ë¦¬ê¸°
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // í”Œë ˆì´ì–´ ê·¸ë¦¬ê¸° (ì‚¼ê°í˜• ìš°ì£¼ì„ )
        ctx.fillStyle = "#00f0ff"; // ë„¤ì˜¨ ë¸”ë£¨
        ctx.beginPath();
        ctx.moveTo(player.x + player.width / 2, player.y); // ìœ„ìª½ ë
        ctx.lineTo(player.x, player.y + player.height); // ì™¼ìª½ ì•„ë˜
        ctx.lineTo(player.x + player.width, player.y + player.height); // ì˜¤ë¥¸ìª½ ì•„ë˜
        ctx.fill();

        // ìš´ì„ ê·¸ë¦¬ê¸° (ì›)
        ctx.fillStyle = "#ff4d4d"; // ë¹¨ê°„ìƒ‰
        meteors.forEach(m => {
            ctx.beginPath();
            ctx.arc(m.x + m.size / 2, m.y + m.size / 2, m.size / 2, 0, Math.PI * 2);
            ctx.fill();
        });

        // ê²Œì„ ì˜¤ë²„ í™”ë©´
        if (isGameOver) {
            ctx.fillStyle = "rgba(0,0,0,0.7)";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "white";
            ctx.font = "40px Arial";
            ctx.fillText("GAME OVER", 80, 300);
        }

        requestAnimationFrame(draw);
        update();
    }

    // ê²Œì„ ì¬ì‹œì‘ í•¨ìˆ˜
    function resetGame() {
        score = 0;
        meteors = [];
        isGameOver = false;
        player.x = 180;
        document.getElementById("score").innerText = "ì ìˆ˜: 0";
        document.getElementById("msg").innerText = "í™”ì‚´í‘œ ì¢Œìš°í‚¤ë¡œ í”¼í•˜ì„¸ìš”!";
    }

    // ê²Œì„ ì‹œì‘
    draw();

</script>
</body>
</html>
